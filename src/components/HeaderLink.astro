---
import type { HTMLAttributes } from "astro/types";

type Props = HTMLAttributes<"a">;

const { href, class: className, ...props } = Astro.props;
const pathname = Astro.url.pathname.replace(import.meta.env.BASE_URL, "");
const subpath = pathname.match(/[^\/]+/g);
const isActive = href === pathname || href === "/" + (subpath?.[0] || "");
---

<a
  href={href}
  class:list={[
    "text-cyber-cyan hover:border-cyber-cyan inline-block border-b-2 border-transparent px-2 py-4 no-underline transition-all duration-300 md:py-2 md:text-sm",
    className,
    {
      "active-link !border-b-cyber-cyan font-bold": isActive,
    },
  ]}
  {...props}
>
  <slot />
</a>

<style>
  .active-link {
    position: relative;
  }

  .active-link::after {
    content: "";
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 2px;
    background-color: var(--cyber-cyan);
    box-shadow:
      0 0 8px rgba(0, 229, 195, 0.8),
      0 0 12px rgba(0, 229, 195, 0.6),
      0 0 16px rgba(0, 229, 195, 0.4);
  }

  @media (max-width: 720px) {
    a {
      padding: 0.5em 0.5em !important;
      font-size: 0.85em !important;
    }
  }
</style>
